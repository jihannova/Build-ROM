env:
    CIRRUS_CLONE_DEPTH: 1
    rclone_config: "ENCRYPTED[!fd566800f0ddff8b6125ec93a32a174ae1abb8d95b6d072ffe5cce0ceff356d58fe7c25b19381e9b1a3a1e6d5eb96e42!]"
    #TG_TOKEN: "ENCRYPTED[!ae64f4fd826ab2764fcb72fb8656f12aa280fae3ca426bba90c70d53b08b7e08cc3a1f94af7f8144e2973d527456cd1b!]"
    #TG_CHAT_ID: "ENCRYPTED[!029352af8b1128d0d5cd801d06d2b1a11d0607221a92831ec33f68d87adeaa4165b6febf0226a205dc7cf5dd7e788d1d!]"
    SF_USERNAME: "ENCRYPTED[!435fc7d0559813d9b9e5ba052a58ad78ed0704471b648ecbb19dbb88a904a12ffb28d9f44258e0610d8af674da396ab4!]"
    SF_PASS: "ENCRYPTED[!122bab13210e1e2719e0362bc5d601afde38ecfb19797a74226d64a4ade63bfd5d303a2e685b0288fb135506a12e0448!]"
    ROM_PROJECT: "CherishOS-tiramisu"
    GIT: "ENCRYPTED[!5c0be80f35adbe5b62f4b5c0a5e18a7a95503c3ae288f0d3e835ad01027716980db4cae090e094be716335ea842c06a3!]"
    TOKEN: "ENCRYPTED[!820ada0cc3426d85e54e55a7cc1586917d1ef7b4db01102982bab081bc5de2a124b45babc64631b1006cc2b28df530e1!]"

task:
  name: Syncing, Building and Uploading
  timeout_in: 2h
  container:
    image: arifjenong/rom:nad
    cpu: 8
    memory: 32G

  Env_background_script:
      - ./env.sh

  ccc_background_script:
      - sleep 120
      - time rclone copy znxtproject:ccache/$ROM_PROJECT/ccache.tar.zst ~ -P
      - ./setup.sh

  Build_script:
      - ./repo.sh

  UpSampah_script:
      - ./build_zip.sh

  SF_script:
      - rm -rf ~/rom
